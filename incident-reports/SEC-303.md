# Incident Report: SEC-303 – XSS via Transaction Descriptions

## Summary
- Reporter: Security Audit  
- Priority: Critical  
- Description: Transaction descriptions rendered through `dangerouslySetInnerHTML`, allowing stored HTML/JS to execute when the dashboard loaded.

## Impact
- Authenticated users viewing the transactions table could have their session hijacked or sensitive data exfiltrated through injected scripts.
- Attackers only needed to submit a crafted description (e.g., via funding flow) to impact any user reviewing account history.

## Detection
- Security audit identified that `TransactionList` used `dangerouslySetInnerHTML` with untrusted data (`transaction.description`).

## Root Cause
1. The transaction API accepts free-form descriptions and stores them verbatim.
2. `support-engineer-interview-main/components/TransactionList.tsx` rendered those values with `dangerouslySetInnerHTML`, skipping sanitization/encoding.

## Resolution
- Removed `dangerouslySetInnerHTML` and introduced a simple `sanitizeDescription` helper inside `TransactionList`. The helper encodes special characters (`&`, `<`, `>`, `"`, `'`) before rendering, ensuring React treats the text as literal content.
- Because React escapes strings by default, the extra encoding acts as a defense-in-depth layer while retaining plain-text descriptions.

## Verification
- Manual reasoning/tests: crafting a description such as `<script>alert(1)</script>` now displays the literal string instead of executing code. Existing descriptions render unchanged as plain text.
- Recommended follow-up: centralize encoding/sanitization utilities and consider server-side validation to block future HTML payloads at submission time.

## Lessons Learned
1. Avoid `dangerouslySetInnerHTML` with untrusted data unless strict sanitization is in place.
2. Treat transaction/user-generated text as untrusted throughout the stack—encode on output and validate on input.
3. Include XSS checks in code reviews for any UI rendering dynamic content.
